{"version":3,"sources":["components/Form/Form.module.css","components/MessageList/MessageList.module.css","components/App/App.module.css","components/Form/Form.js","components/MessageList/MessageList.js","components/App/App.js","index.js"],"names":["module","exports","Form","onSubmit","useState","userName","setUserName","userMessage","setUserMessage","isInputShown","setIsInputShown","onInputChange","e","currentTarget","name","value","preventDefault","id","className","s","form","type","onChange","required","placeholder","input","button","MessageList","data","styles","console","log","classes","item","list","map","el","index","MESSAGE_EVENT","App","messages","setMessages","socketRef","useRef","useEffect","current","socketIOClient","on","message","incomingMessage","ownedByCurrentUser","senderId","disconnect","section","messageBody","emit","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wFACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,MAAQ,oBAAoB,OAAS,uB,mBCAjFD,EAAOC,QAAU,CAAC,KAAO,0BAA0B,KAAO,4B,mBCA1DD,EAAOC,QAAU,CAAC,QAAU,uB,iKCEfC,EAAO,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACrB,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAsCF,mBAAS,IAA/C,mBAAOG,EAAP,KAAoBC,EAApB,KACA,EAAwCJ,oBAAS,GAAjD,mBAAOK,EAAP,KAAqBC,EAArB,KAEMC,EAAgB,SAAAC,GACpB,MAAwBA,EAAEC,cAAlBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACd,OAAQD,GACN,IAAK,WACHR,EAAYS,GACZ,MACF,IAAK,cACHP,EAAeO,KAerB,OACE,uBAAMZ,SARa,SAAAS,GACnBA,EAAEI,iBACFb,EAASE,EAAUE,GACnBC,EAAe,IACfE,GAAgB,IAIcO,GAAI,OAAQC,UAAWC,IAAEC,KAAvD,UAEIX,GAGF,gCACE,uBACEY,KAAK,OACLP,KAAK,WACLC,MAAOV,EACPiB,SAAUX,EACVY,UAAU,EACRC,YAAa,qBACbN,UAAWC,IAAEM,UAIlBpB,GACC,qCACE,gCACE,uBACEgB,KAAK,OACLP,KAAK,cACLC,MAAOR,EACPe,SAAUX,EACVY,UAAU,EACVC,YAAa,yDACbN,UAAWC,IAAEM,UAGjB,wBAAQJ,KAAK,SAASH,UAAWC,IAAEO,OAAnC,2E,iBC3DGC,EAAc,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,KAAMC,EAAa,EAAbA,OAClCC,QAAQC,IAAIF,GACZ,IAAMG,EAAO,UAAMH,EAAN,cAAkBV,IAAEc,MACjC,OACE,oBAAIhB,GAAI,WAAYC,UAAWC,IAAEe,KAAjC,SACGN,EAAKO,KAAI,SAACC,EAAIC,GAAL,OAER,cADA,CACA,MAAgBnB,UAAWc,EAA3B,UACE,iCAAOI,EAAG/B,SAAV,QACA,+BAAO+B,EAAG7B,gBAFH8B,S,iBCFXC,EAAgB,eA6DLC,MA1DjB,WACE,MAAgCnC,mBAAS,IAAzC,mBAAOoC,EAAP,KAAiBC,EAAjB,KACMC,EAAYC,mBAgDhB,OA7CFC,qBAAU,WAgBR,OAbAF,EAAUG,QAAUC,YAVL,yBAafJ,EAAUG,QAAQE,GAAGT,GAAe,SAACU,GACnC,IAAMC,EAAe,2BAChBD,GADgB,IAEnBE,mBAAoBF,EAAQG,WAAaT,EAAUG,QAAQ5B,KAE7DwB,GAAY,SAACD,GAAD,4BAAkBA,GAAlB,CAA4BS,UAKnC,WACLP,EAAUG,QAAQO,gBAEnB,IA2BC,sBAAKlC,UAAWC,IAAEkC,QAAlB,UACE,cAAC,EAAD,CAAazB,KAAMY,EAAUX,OAjD/BA,YAkDE,cAAC,EAAD,CAAM1B,SAbK,SAACE,EAAUE,GAC1B,IAdmB+C,IAcA,CACjBjD,WACAE,eAfFuB,QAAQC,IAAIuB,GACZZ,EAAUG,QAAQU,KAAKjB,EAAvB,2BACKgB,GADL,IAEEH,SAAUT,EAAUG,QAAQ5B,aCnClCuC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.869caf1c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__jdaK0\",\"input\":\"Form_input__JFb-e\",\"button\":\"Form_button__n7oa8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MessageList_list__1Cbdw\",\"item\":\"MessageList_item__2B3ND\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"App_section__1Nh6u\"};","import { useState } from 'react';\r\nimport s from './Form.module.css'\r\n\r\nexport const Form = ({ onSubmit }) => {\r\n  const [userName, setUserName] = useState('');\r\n  const [userMessage, setUserMessage] = useState('');\r\n  const [isInputShown, setIsInputShown] = useState(true)\r\n\r\n  const onInputChange = e => {\r\n    const { name, value } = e.currentTarget;\r\n    switch (name) {\r\n      case 'userName':\r\n        setUserName(value);\r\n        break;\r\n      case 'userMessage':\r\n        setUserMessage(value);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const onSubmitForm = e => {\r\n    e.preventDefault();\r\n    onSubmit(userName, userMessage);\r\n    setUserMessage('');\r\n    setIsInputShown(false)\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmitForm} id={'form'} className={s.form}>\r\n      {\r\n        isInputShown &&\r\n\r\n\r\n      <label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"userName\"\r\n          value={userName}\r\n          onChange={onInputChange}\r\n          required={true}\r\n            placeholder={'Имя'}\r\n            className={s.input}\r\n        ></input>\r\n      </label>\r\n      }\r\n      {userName && (\r\n        <>\r\n          <label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"userMessage\"\r\n              value={userMessage}\r\n              onChange={onInputChange}\r\n              required={true}\r\n              placeholder={'Сообщение'}\r\n              className={s.input}\r\n            ></input>\r\n          </label>\r\n          <button type=\"submit\" className={s.button}>Отправить</button>\r\n        </>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n","import s from './MessageList.module.css'\r\n\r\nexport const MessageList = ({ data, styles }) => {\r\n  console.log(styles);\r\n  const classes = `${styles} + ${s.item}`\r\n  return (\r\n    <ul id={'messages'} className={s.list}>\r\n      {data.map((el, index) => (\r\n        // <li key={index} className={s.item}>\r\n        <li key={index} className={classes}>\r\n          <span>{el.userName}: </span>\r\n          <span>{el.userMessage}</span>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n","import socketIOClient from \"socket.io-client\"\nimport { useState, useEffect, useRef } from 'react';\nimport { Form } from '../Form/Form'\n\nimport { MessageList } from '../MessageList/MessageList';\nimport s from './App.module.css'\n\nconst MESSAGE_EVENT = \"chat message\";\nconst SERVER_URL = 'http://localhost:5555'\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const socketRef = useRef();\n  let styles\n\n  useEffect(() => {\n\n    // Creates a WebSocket connection\n    socketRef.current = socketIOClient(SERVER_URL);\n\n    // Listens for incoming messages\n    socketRef.current.on(MESSAGE_EVENT, (message) => {\n      const incomingMessage = {\n        ...message,\n        ownedByCurrentUser: message.senderId === socketRef.current.id,\n      };\n      setMessages((messages) => [...messages, incomingMessage]);\n    });\n\n    // Destroys the socket reference\n    // when the connection is closed\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n\n\n  const sendMessage = (messageBody) => {\n    console.log(messageBody);\n    socketRef.current.emit(MESSAGE_EVENT, {\n      ...messageBody,\n      senderId: socketRef.current.id,\n    });\n\n    // if (senderId === socketRef.current.id) {\n    //   styles = 'item-owner'\n    // }\n    // styles = 'item-another'\n  };\n\n  const onSubmit = (userName, userMessage) => {\n    const newMessage = {\n      userName,\n      userMessage,\n    }\n    sendMessage(newMessage);\n  }\n\n  // const styles\n\n    return (\n      <div className={s.section}>\n        <MessageList data={messages} styles={styles} />\n        <Form onSubmit={onSubmit} />\n      </div>\n    );\n\n  }\n  export default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}